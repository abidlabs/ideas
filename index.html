<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Would You Rather?</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      background: #f7f7fa;
      font-family: 'Segoe UI', 'Arial', sans-serif;
    }
    body {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      position: relative;
    }
    .card-container {
      display: flex;
      flex: 1 1 auto;
      justify-content: center;
      align-items: center;
      width: 100vw;
      height: 100vh;
      position: relative;
    }
    .card {
      min-width: 320px;
      max-width: 90vw;
      min-height: 180px;
      max-height: 60vh;
      background: linear-gradient(135deg, #3a3a7c 0%, #7c3aed 60%, #a855f7 100%);
      border: none;
      border-radius: 32px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.12);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      font-size: 2.2rem;
      font-weight: 600;
      color: #fff;
      text-align: center;
      padding: 2.5rem 2rem;
      transition: background 0.3s, transform 0.6s cubic-bezier(.68,-0.55,.27,1.55), opacity 0.6s;
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%) rotateY(0deg);
      z-index: 2;
      will-change: transform, opacity;
    }
    .card.animate-out {
      animation: cardOutCircular 0.6s forwards;
      z-index: 1;
    }
    .card.animate-in {
      animation: cardInCircular 0.6s forwards;
      z-index: 3;
    }
    @keyframes cardOutCircular {
      0% {
        opacity: 1;
        transform: translate(-50%, -50%) rotate(0deg) scale(1);
      }
      60% {
        opacity: 0.7;
        transform: translate(-50%, -50%) rotate(30deg) scale(0.95) translateX(30px) translateY(-10px);
      }
      100% {
        opacity: 0;
        transform: translate(120%, -120%) rotate(90deg) scale(0.7);
      }
    }
    @keyframes cardInCircular {
      0% {
        opacity: 0;
        transform: translate(-120%, 120%) rotate(-90deg) scale(0.7);
      }
      40% {
        opacity: 0.7;
        transform: translate(-50%, -50%) rotate(-30deg) scale(0.95) translateX(-30px) translateY(10px);
      }
      100% {
        opacity: 1;
        transform: translate(-50%, -50%) rotate(0deg) scale(1);
      }
    }
    .refresh-btn {
      position: fixed;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      width: 72px;
      height: 72px;
      background: linear-gradient(135deg, #ff69b4 40%, #00e6ff 100%);
      border: none;
      border-radius: 50%;
      box-shadow: 0 4px 16px rgba(0,0,0,0.12);
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      z-index: 10;
      transition: box-shadow 0.2s;
    }
    .refresh-btn:active {
      box-shadow: 0 2px 8px rgba(0,0,0,0.18);
    }
    .refresh-icon {
      width: 36px;
      height: 36px;
      fill: #fff;
      display: block;
    }
    @media (max-width: 600px) {
      .card {
        font-size: 1.3rem;
        min-width: 80vw;
        padding: 1.5rem 1rem;
      }
      .refresh-btn {
        width: 56px;
        height: 56px;
      }
      .refresh-icon {
        width: 28px;
        height: 28px;
      }
    }
    .idea-text {
      width: 100%;
      font-size: inherit;
      font-weight: inherit;
      text-align: center;
    }
    .tip-text {
      width: 100%;
      font-size: 1.1rem;
      margin-top: 1.2em;
      opacity: 0.85;
      text-align: center;
      font-weight: 500;
    }
    .tip-list {
      width: 100%;
      font-size: 1.1rem;
      margin-top: 1.2em;
      opacity: 0.85;
      text-align: left;
      font-weight: 500;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      padding-left: 1.2em;
    }
    .tip-list li {
      margin-bottom: 0.5em;
      line-height: 1.5;
    }
    .card-meta {
      font-size: 0.95rem;
      color: #f3eaff;
      opacity: 0.85;
      margin-top: 1.2em;
      text-align: center;
      letter-spacing: 0.01em;
      font-weight: 400;
      line-height: 1.4;
      user-select: none;
      font-family: 'Segoe UI', 'Arial', 'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', sans-serif;
    }
    .filter-row {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1.2em;
      margin-bottom: 1.5em;
      margin-top: 2em;
    }
    .filter-btn {
      width: 54px;
      height: 54px;
      background: #fff;
      border: 2px solid #e0e0f0;
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(60,40,120,0.07);
      transition: border 0.2s, box-shadow 0.2s, background 0.2s;
      outline: none;
      position: relative;
      user-select: none;
    }
    .filter-btn .filter-icon {
      pointer-events: none;
    }
    .filter-btn.pressed {
      background: linear-gradient(135deg, #a855f7 0%, #7c3aed 100%);
      color: #fff;
      border: 2px solid #a855f7;
      box-shadow: 0 4px 16px rgba(120,60,220,0.10);
    }
    .filter-btn:not(.pressed) {
      background: #fff;
      color: #a855f7;
      border: 2px solid #e0e0f0;
      opacity: 0.7;
    }
    .filter-btn:active {
      box-shadow: 0 1px 4px rgba(60,40,120,0.13);
    }
    @media (max-width: 600px) {
      .filter-btn {
        width: 38px;
        height: 38px;
        font-size: 1.3rem;
        border-radius: 10px;
      }
      .filter-row {
        gap: 0.7em;
        margin-bottom: 1em;
        margin-top: 1em;
      }
    }
  </style>
</head>
<body>
  <div class="filter-row">
    <button class="filter-btn pressed" id="filter-sun" title="Day activities">
      <span class="filter-icon">&#9728;&#65039;</span>
    </button>
    <button class="filter-btn pressed" id="filter-moon" title="Night activities">
      <span class="filter-icon">&#127769;</span>
    </button>
    <button class="filter-btn pressed" id="filter-kid" title="Kid friendly">
      <span class="filter-icon">&#128118;</span>
    </button>
    <button class="filter-btn pressed" id="filter-list" title="No reservation required">
      <span class="filter-icon">&#128221;</span>
    </button>
  </div>
  <div class="card-container">
    <div class="card" id="question-card"></div>
  </div>
  <button class="refresh-btn" id="refresh-btn" aria-label="Next question">
    <svg class="refresh-icon" viewBox="-40 -40 570 570" fill="none" xmlns="http://www.w3.org/2000/svg" style="width: 70%; height: 70%; display: block; margin: auto;">
      <path d="M460.656,132.911c-58.7-122.1-212.2-166.5-331.8-104.1c-9.4,5.2-13.5,16.6-8.3,27c5.2,9.4,16.6,13.5,27,8.3 c99.9-52,227.4-14.9,276.7,86.3c65.4,134.3-19,236.7-87.4,274.6c-93.1,51.7-211.2,17.4-267.6-70.7l69.3,14.5 c10.4,2.1,21.8-4.2,23.9-15.6c2.1-10.4-4.2-21.8-15.6-23.9l-122.8-25c-20.6-2-25,16.6-23.9,22.9l15.6,123.8 c1,10.4,9.4,17.7,19.8,17.7c12.8,0,20.8-12.5,19.8-23.9l-6-50.5c57.4,70.8,170.3,131.2,307.4,68.2 C414.856,432.511,548.256,314.811,460.656,132.911z" fill="#fff" stroke="#fff" stroke-width="30" stroke-linejoin="round"/>
    </svg>
  </button>
  <script>
    const dateIdeas = [
      {
        idea: "Take a pottery class together.",
        kids: false,
        reservation: true,
        months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        time: "day",
        tips: [
          "Make something for each other instead of for yourselves.",
          "Follow up with a coffee or dessert date.",
          "Buy matching aprons or smocks first."
        ]
      },
      {
        idea: "Have a picnic in a scenic park and bring homemade snacks.",
        kids: true,
        reservation: false,
        months: ["Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct"],
        time: "day",
        tips: [
          "Bring a frisbee or a board game for extra fun!",
          "Try to spot and name as many birds or animals as you can.",
          "Pack a surprise treat for your date to discover."
        ]
      },
      {
        idea: "Visit a botanical garden and take photos of your favorite flowers.",
        kids: true,
        reservation: false,
        months: ["Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct"],
        time: "day",
        tips: [
          "Touch textures of leaves (if permitted)â€”talk about how they feel.",
          "Ask silly or thoughtful questions (\"If you were a flower, which would you be?\").",
          "Photo challenge: Take turns snapping the prettiest or funniest plant photo. Vote on your favorites."
        ]
      },
      {
        idea: "Explore a local museum or art gallery together.",
        kids: true,
        reservation: false,
        months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        time: "both",
        tips: [
          "Each pick your favorite piece and explain why you chose it.",
          "Invent a backstory for a random artwork.",
          "Try to find the oldest or strangest item in the collection."
        ]
      },
      {
        idea: "Take a pottery or ceramics class and make something for each other.",
        kids: false,
        reservation: true,
        months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        time: "day",
        tips: [
          "Personalize your creations with a secret message or symbol.",
          "Try making something with your non-dominant hand.",
          "Swap pieces halfway through and finish each other's work."
        ]
      },
      {
        idea: "Go for a hike on a nature trail and enjoy the fresh air.",
        kids: true,
        reservation: false,
        months: ["Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct"],
        time: "day",
        tips: [
          "Bring a nature scavenger hunt list and see who finds the most items.",
          "Pause and sketch or describe the most beautiful view you find.",
          "Collect interesting leaves or rocks (if allowed) as mementos."
        ]
      },
      {
        idea: "Visit a science center or planetarium and stargaze.",
        kids: true,
        reservation: false,
        months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        time: "night",
        tips: [
          "Try to spot a constellation or make up your own.",
          "Guess which planet or star is which before reading the signs.",
          "Write a short story inspired by something you see."
        ]
      },
      {
        idea: "Try a cooking class for a new cuisine and cook together.",
        kids: false,
        reservation: true,
        months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        time: "both",
        tips: [
          "Have a friendly cook-off to see who plates their dish best.",
          "Invent a new dish using a surprise ingredient.",
          "Give your finished dishes creative names and vote for the best."
        ]
      },
      {
        idea: "Go to a board game cafÃ© and play strategy games.",
        kids: false,
        reservation: false,
        months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        time: "both",
        tips: [
          "Each pick a game the other has never played before.",
          "Make up a silly rule for one round of a game.",
          "Play a cooperative game and try to beat the highest score."
        ]
      },
      {
        idea: "Visit a farmer's market and pick out ingredients for a meal.",
        kids: true,
        reservation: false,
        months: ["Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct"],
        time: "day",
        tips: [
          "Set a budget and see who can find the most unique ingredient.",
          "Ask a vendor for their favorite recipe using their produce.",
          "Create a meal together using only what you buy at the market."
        ]
      },
      {
        idea: "Take a scenic bike ride along a river or lake.",
        kids: true,
        reservation: false,
        months: ["Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct"],
        time: "day",
        tips: [
          "Stop for a mini photo shoot at the prettiest spot you find.",
          "Race to a landmark and reward the winner with a treat.",
          "Try riding tandem for a stretch if bikes allow."
        ]
      },
      {
        idea: "Go fruit picking at a local orchard or berry farm.",
        kids: true,
        reservation: false,
        months: ["May", "Jun", "Jul", "Aug", "Sep"],
        time: "day",
        tips: [
          "Have a bake-off with what you pick when you get home.",
          "See who can pick the biggest or most unusual fruit.",
          "Make up a fruit-themed game or challenge while picking."
        ]
      },
      {
        idea: "Visit an aquarium and learn about marine life.",
        kids: true,
        reservation: false,
        months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        time: "both",
        tips: [
          "Each person picks their favorite sea creature and shares a fun fact.",
          "Try to spot the most colorful or unusual fish.",
          "Draw or describe your favorite tank or exhibit."
        ]
      },
      {
        idea: "Take a painting or art workshop together.",
        kids: false,
        reservation: true,
        months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        time: "both",
        tips: [
          "Swap canvases halfway through and finish each other's artwork.",
          "Paint a scene from a shared memory or dream up a new one.",
          "Use only three colors for a fun challenge."
        ]
      },
      {
        idea: "Go to a pottery painting studio and decorate mugs or plates.",
        kids: true,
        reservation: true,
        months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        time: "both",
        tips: [
          "Paint something that represents a shared memory.",
          "Try painting with your non-dominant hand for a round.",
          "Create a matching set or theme together."
        ]
      },
      {
        idea: "Visit a historical site or landmark in your city.",
        kids: true,
        reservation: false,
        months: ["Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct"],
        time: "day",
        tips: [
          "Dress up in a style from the era and take themed photos.",
          "Find the oldest thing you can and guess its story.",
          "Make up a fun or mysterious legend about the place."
        ]
      },
      {
        idea: "Have a themed movie night at home with snacks and cozy blankets.",
        kids: true,
        reservation: false,
        months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        time: "night",
        tips: [
          "Create a trivia quiz based on the movie you watch.",
          "Make snacks that match the movie's theme or setting.",
          "Pause and predict what will happen next in the story."
        ]
      },
      {
        idea: "Go to a trampoline park or indoor climbing gym.",
        kids: true,
        reservation: true,
        months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        time: "both",
        tips: [
          "Set fun challenges for each other, like who can bounce the highest.",
          "Try a new obstacle or area you haven't before.",
          "Time each other and see who can complete a course fastest."
        ]
      },
      {
        idea: "Take a guided nature walk or birdwatching tour.",
        kids: true,
        reservation: true,
        months: ["Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct"],
        time: "day",
        tips: [
          "Bring binoculars and a bird guide to see who can spot the rarest bird.",
          "Keep a list of all the animals or plants you see.",
          "Try to mimic bird calls or make up your own."
        ]
      },
      {
        idea: "Visit a perfume factory or fragrance workshop and create your own scent.",
        kids: false,
        reservation: true,
        months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        time: "day",
        tips: [
          "Try to guess each other's favorite scent ingredients.",
          "Invent a scent and give it a creative name.",
          "Describe a memory that a scent reminds you of."
        ]
      },
      {
        idea: "Go to a planetarium for a star show or astronomy night.",
        kids: true,
        reservation: true,
        months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        time: "night",
        tips: [
          "Bring a notebook and write a short story inspired by the stars.",
          "See who can spot the most constellations.",
          "Imagine and name your own constellation together."
        ]
      },
      {
        idea: "Try a puzzle room or escape room challenge together.",
        kids: false,
        reservation: true,
        months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        time: "both",
        tips: [
          "Afterwards, design a mini puzzle for each other to solve at home.",
          "Divide into teams and see who escapes faster (if with friends).",
          "Keep track of the funniest or most surprising moments."
        ]
      },
      {
        idea: "Visit a local animal sanctuary or petting zoo.",
        kids: true,
        reservation: false,
        months: ["Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct"],
        time: "day",
        tips: [
          "Pick an animal to learn about and share your findings.",
          "Try to mimic the sounds or movements of the animals.",
          "Vote on the cutest or most unusual animal you see."
        ]
      },
      {
        idea: "Take a photography walk and capture interesting sights.",
        kids: true,
        reservation: false,
        months: ["Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct"],
        time: "day",
        tips: [
          "Create a photo scavenger hunt with a list of things to find.",
          "Only take black-and-white photos for a creative twist.",
          "At the end, pick your favorite photo and explain why."
        ]
      },
      {
        idea: "Go kayaking or paddle boating on a calm lake.",
        kids: true,
        reservation: false,
        months: ["May", "Jun", "Jul", "Aug", "Sep"],
        time: "day",
        tips: [
          "Pack a waterproof disposable camera for fun action shots.",
          "Race to a point and back for a friendly competition.",
          "Try to spot fish or interesting plants in the water."
        ]
      },
      {
        idea: "Attend a pottery or craft fair and browse handmade goods.",
        kids: true,
        reservation: false,
        months: ["Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct"],
        time: "day",
        tips: [
          "Each buy a small gift for the other without revealing it until the end.",
          "Vote on the most creative or unusual item you find.",
          "Talk to a vendor and learn about their craft."
        ]
      },
      {
        idea: "Have a bookshop date and pick out books for each other.",
        kids: true,
        reservation: false,
        months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        time: "both",
        tips: [
          "Write a note inside the book you choose for your date.",
          "Pick a book based only on its cover and swap.",
          "Find the oldest or most unusual book in the shop."
        ]
      },
      {
        idea: "Visit a butterfly conservatory and watch the butterflies.",
        kids: true,
        reservation: false,
        months: ["Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct"],
        time: "day",
        tips: [
          "Try to spot the rarest butterfly and take a photo if you can.",
          "Guess how many different species you can find.",
          "Draw or describe your favorite butterfly."
        ]
      },
      {
        idea: "Take a scenic drive and stop at interesting spots along the way.",
        kids: true,
        reservation: false,
        months: ["Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct"],
        time: "both",
        tips: [
          "Create a playlist for the drive and take turns being DJ.",
          "Stop at a random spot and explore for 10 minutes.",
          "Play a road trip game like I Spy or 20 Questions."
        ]
      },
      {
        idea: "Go to a cooking demonstration or food festival (halal options).",
        kids: true,
        reservation: false,
        months: ["Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct"],
        time: "day",
        tips: [
          "Rate each dish you try and pick a winner at the end.",
          "Try a dish you've never had before and describe it.",
          "Collect recipe cards or take notes for inspiration."
        ]
      },
      {
        idea: "Try a calligraphy or art class together.",
        kids: false,
        reservation: true,
        months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        time: "both",
        tips: [
          "Write each other a note or poem using your new skills.",
          "Try writing your names in a different language or script.",
          "Create a collaborative piece to take home."
        ]
      }
    ];

    function getRandomBrightColor() {
      // HSL: high saturation, high lightness, random hue
      const hue = Math.floor(Math.random() * 360);
      return `hsl(${hue}, 90%, 60%)`;
    }

    function getCurrentMonthAbbr() {
      const monthAbbrs = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
      return monthAbbrs[new Date().getMonth()];
    }

    function getFilteredIdeas() {
      const currentMonth = getCurrentMonthAbbr();
      let filtered = dateIdeas.filter(idea => Array.isArray(idea.months) && idea.months.includes(currentMonth));
      // Filter by button states
      if (window.filterStates) {
        // Sun: if unpressed, remove day or both
        if (!window.filterStates.sun) {
          filtered = filtered.filter(idea => idea.time !== 'day' && idea.time !== 'both');
        }
        // Moon: if unpressed, remove night or both
        if (!window.filterStates.moon) {
          filtered = filtered.filter(idea => idea.time !== 'night' && idea.time !== 'both');
        }
        // Kid: if unpressed, remove kid-friendly
        if (!window.filterStates.kid) {
          filtered = filtered.filter(idea => idea.kids === false);
        }
        // List: if unpressed, remove reservation required
        if (!window.filterStates.list) {
          filtered = filtered.filter(idea => idea.reservation === false);
        }
      }
      return filtered.length > 0 ? filtered : dateIdeas;
    }

    let currentIndex = 0;
    let lastIndex = -1;
    const card = document.getElementById('question-card');
    const refreshBtn = document.getElementById('refresh-btn');

    function pickRandomIndex(ideasArr) {
      let idx;
      do {
        idx = Math.floor(Math.random() * ideasArr.length);
      } while (ideasArr.length > 1 && idx === currentIndex);
      return idx;
    }

    function showNextIdea(animate = true) {
      const filteredIdeas = getFilteredIdeas();
      lastIndex = currentIndex;
      currentIndex = pickRandomIndex(filteredIdeas);
      const next = filteredIdeas[currentIndex];
      const gradients = [
        'linear-gradient(135deg, #3a3a7c 0%, #7c3aed 60%, #a855f7 100%)', // purple
        'linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)', // blue
        'linear-gradient(135deg, #ff512f 0%, #dd2476 100%)', // red-pink
        'linear-gradient(135deg, #11998e 0%, #38ef7d 100%)', // green
        'linear-gradient(135deg, #fc5c7d 0%, #6a82fb 100%)', // pink-blue
        'linear-gradient(135deg, #f7971e 0%, #ffd200 100%)', // orange-yellow
        'linear-gradient(135deg, #00c3ff 0%, #ffff1c 100%)', // blue-yellow
        'linear-gradient(135deg, #ee0979 0%, #ff6a00 100%)', // magenta-orange
        'linear-gradient(135deg, #43cea2 0%, #185a9d 100%)', // teal-blue
        'linear-gradient(135deg, #f953c6 0%, #b91d73 100%)', // pink-purple
        'linear-gradient(135deg, #ff6e7f 0%, #bfe9ff 100%)', // coral-lightblue
        'linear-gradient(135deg, #c471f5 0%, #fa71cd 100%)', // violet-pink
        'linear-gradient(135deg, #f7971e 0%, #ffd200 100%)', // orange-yellow
        'linear-gradient(135deg, #00f2fe 0%, #4facfe 100%)', // cyan-blue
        'linear-gradient(135deg, #f857a6 0%, #ff5858 100%)', // pink-red
        'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)' // green-cyan
      ];
      if (typeof showNextIdea.gradientIndex === 'undefined') {
        showNextIdea.gradientIndex = 0;
      }
      showNextIdea.gradientIndex = (showNextIdea.gradientIndex + 1) % gradients.length;
      const nextGradient = gradients[showNextIdea.gradientIndex];

      // --- Meta info construction ---
      // Month range
      let months = next.months || [];
      let monthRange = months.length > 1 ? `${months[0]} â€“ ${months[months.length-1]}` : (months[0] || "");
      // Time
      let timeLabel = next.time === "both" ? "Day/Night" : (next.time.charAt(0).toUpperCase() + next.time.slice(1));
      // Kids
      let kidsLabel = next.kids ? ' &bull; <span title="Kid friendly">&#128118; kids</span>' : '';
      // Reservation
      let reservationLabel = next.reservation ? ' &bull; &#128694; Reservation required' : ' &bull; &#128694; No reservation required';
      // Meta HTML
      let metaHTML = `<div class="card-meta">${monthRange} &bull; ${timeLabel}${kidsLabel}${reservationLabel}</div>`;

      if (animate) {
        card.classList.add('animate-out');
        setTimeout(() => {
          card.style.background = nextGradient;
          card.innerHTML = `<div class='idea-text'>${next.idea}</div><ul class='tip-list'>${next.tips.map(tip => `<li>${tip}</li>`).join('')}</ul>${metaHTML}`;
          card.classList.remove('animate-out');
          card.classList.add('animate-in');
          setTimeout(() => {
            card.classList.remove('animate-in');
          }, 600);
        }, 600);
      } else {
        card.style.background = nextGradient;
        card.innerHTML = `<div class='idea-text'>${next.idea}</div><ul class='tip-list'>${next.tips.map(tip => `<li>${tip}</li>`).join('')}</ul>${metaHTML}`;
      }
    }

    refreshBtn.addEventListener('click', () => {
      showNextIdea();
    });

    // On page load, pick a random idea and gradient, set them, and animate in
    window.addEventListener('DOMContentLoaded', () => {
      const gradients = [
        'linear-gradient(135deg, #3a3a7c 0%, #7c3aed 60%, #a855f7 100%)',
        'linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)',
        'linear-gradient(135deg, #ff512f 0%, #dd2476 100%)',
        'linear-gradient(135deg, #11998e 0%, #38ef7d 100%)',
        'linear-gradient(135deg, #fc5c7d 0%, #6a82fb 100%)',
        'linear-gradient(135deg, #f7971e 0%, #ffd200 100%)',
        'linear-gradient(135deg, #00c3ff 0%, #ffff1c 100%)',
        'linear-gradient(135deg, #ee0979 0%, #ff6a00 100%)',
        'linear-gradient(135deg, #43cea2 0%, #185a9d 100%)',
        'linear-gradient(135deg, #f953c6 0%, #b91d73 100%)',
        'linear-gradient(135deg, #ff6e7f 0%, #bfe9ff 100%)',
        'linear-gradient(135deg, #c471f5 0%, #fa71cd 100%)',
        'linear-gradient(135deg, #f7971e 0%, #ffd200 100%)',
        'linear-gradient(135deg, #00f2fe 0%, #4facfe 100%)',
        'linear-gradient(135deg, #f857a6 0%, #ff5858 100%)',
        'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)'
      ];
      // Filter ideas for current month
      const filteredIdeas = getFilteredIdeas();
      currentIndex = Math.floor(Math.random() * filteredIdeas.length);
      showNextIdea.gradientIndex = Math.floor(Math.random() * gradients.length);
      const first = filteredIdeas[currentIndex];
      // --- Meta info construction ---
      let months = first.months || [];
      let monthRange = months.length > 1 ? `${months[0]} â€“ ${months[months.length-1]}` : (months[0] || "");
      let timeLabel = first.time === "both" ? "Day/Night" : (first.time.charAt(0).toUpperCase() + first.time.slice(1));
      let kidsLabel = first.kids ? ' &bull; <span title="Kid friendly">&#128118; kids</span>' : '';
      let reservationLabel = first.reservation ? ' &bull; &#128694; Reservation required' : ' &bull; &#128694; No reservation required';
      let metaHTML = `<div class="card-meta">${monthRange} &bull; ${timeLabel}${kidsLabel}${reservationLabel}</div>`;
      card.innerHTML = `<div class='idea-text'>${first.idea}</div><ul class='tip-list'>${first.tips.map(tip => `<li>${tip}</li>`).join('')}</ul>${metaHTML}`;
      card.style.background = gradients[showNextIdea.gradientIndex];
      // Animate in
      card.classList.add('animate-in');
      setTimeout(() => {
        card.classList.remove('animate-in');
      }, 600);
    });

    // Shake detection (mobile)
    let lastShake = 0;
    let lastX = null, lastY = null, lastZ = null;
    const SHAKE_THRESHOLD = 15; // tune as needed
    window.addEventListener('devicemotion', function(event) {
      if (!event.accelerationIncludingGravity) return;
      const { x, y, z } = event.accelerationIncludingGravity;
      if (lastX !== null && lastY !== null && lastZ !== null) {
        const deltaX = Math.abs(x - lastX);
        const deltaY = Math.abs(y - lastY);
        const deltaZ = Math.abs(z - lastZ);
        if ((deltaX + deltaY + deltaZ) > SHAKE_THRESHOLD) {
          const now = Date.now();
          if (now - lastShake > 1000) { // 1s cooldown
            showNextIdea();
            lastShake = now;
          }
        }
      }
      lastX = x;
      lastY = y;
      lastZ = z;
    });

    // Optional: allow pressing spacebar for next question (desktop)
    window.addEventListener('keydown', (e) => {
      if (e.code === 'Space') {
        showNextIdea();
      }
    });

    // --- Filter button logic ---
    window.filterStates = { sun: true, moon: true, kid: true, list: true };
    function updateFilterState(btn, key) {
      window.filterStates[key] = !window.filterStates[key];
      btn.classList.toggle('pressed');
      showNextIdea();
    }
    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('filter-sun').addEventListener('click', function() { updateFilterState(this, 'sun'); });
      document.getElementById('filter-moon').addEventListener('click', function() { updateFilterState(this, 'moon'); });
      document.getElementById('filter-kid').addEventListener('click', function() { updateFilterState(this, 'kid'); });
      document.getElementById('filter-list').addEventListener('click', function() { updateFilterState(this, 'list'); });
    });
  </script>
</body>
</html>
